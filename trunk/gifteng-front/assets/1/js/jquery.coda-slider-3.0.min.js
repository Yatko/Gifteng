/***********************************************************************
*
*  Coda Slider 3
*  Kevin Batdorf
*
*  http://kevinbatdorf.github.com/codaslider
*
*  GPL license & MIT license
*
************************************************************************/
if(typeof Object.create!=="function"){Object.create=function(b){function a(){}a.prototype=b;return new a()}}(function(d,c,a,e){var b={init:function(g,h){var f=this;d("body").removeClass("coda-slider-no-js");d(".coda-slider").prepend('<p class="loading">Loading...<br /><img src="./img/ajax-loader.gif" width="220" height="19" alt="loading..." /></p>');f.elem=h;f.$elem=d(h);f.sliderId="#"+(f.$elem).attr("id");f.options=d.extend({},d.fn.codaSlider.options,g);f.sliderId="#"+(f.$elem).attr("id");f.build();if(f.options.autoSlide){f.autoSlide()}f.events();d("p.loading").remove()},build:function(){var f=this;if(d(f.sliderId).parent().attr("class")!="coda-slider-wrapper"){d(f.sliderId).wrap('<div id="'+(f.$elem).attr("id")+'-wrapper" class="coda-slider-wrapper"></div>')}d(f.sliderId+" > div").addClass("panel");f.panelClass=f.sliderId+" .panel";d(f.panelClass).wrapAll('<div class="panel-container"></div>');if(d(f.panelClass).children().attr("class")!="panel-wrapper"){d(f.panelClass).wrapInner('<div class="panel-wrapper"></div>')}f.panelContainer=(d(f.panelClass).parent());if(f.options.hashLinking){f.hash=(c.location.hash);f.hashPanel=(f.hash).replace("#","")}f.currentTab=(f.options.hashLinking&&f.hash)?f.hashPanel-1:f.options.firstPanelToLoad-1;if(f.options.autoHeight){d(f.sliderId).css("height",d(d(f.panelContainer).children()[f.currentTab]).height()+d(f.sliderId+"-wrapper .coda-nav-right").height())}if(f.options.dynamicTabs){f.addNavigation()}if(f.options.dynamicArrows){f.addArrows()}f.totalSliderWidth=d(f.sliderId).outerWidth(true)+d(d(f.sliderId).parent()).children("[class^=coda-nav-left]").outerWidth(true)+d(d(f.sliderId).parent()).children("[class^=coda-nav-right]").outerWidth(true);d(d(f.sliderId).parent()).css("width",f.totalSliderWidth);if(f.options.dynamicTabs){f.alignNavigation()}if(f.options.continuous){d(f.panelContainer).prepend(d(f.panelContainer).children().last().clone());d(f.panelContainer).append(d(f.panelContainer).children().eq(1).clone())}f.clickable=true;f.panelCount=d(f.panelClass).length;f.panelWidth=d(f.panelClass).outerWidth();f.totalWidth=f.panelCount*f.panelWidth;f.pSign="px";f.slideWidth=d(f.sliderId).width();d(f.panelContainer).css("margin-left",(-f.slideWidth*~~(f.options.continuous))+(-f.slideWidth*f.currentTab));f.setCurrent(f.currentTab);d(f.sliderId+" .panel-container").css("width",f.totalWidth)},addNavigation:function(){var f=this;var g='<div class="coda-nav"><ul></ul></div>';if(f.options.dynamicTabsPosition==="bottom"){d(f.sliderId).after(g)}else{d(f.sliderId).before(g)}d.each((f.$elem).find(f.options.panelTitleSelector),function(h){d(d(f.sliderId).parent()).find(".coda-nav ul").append('<li class="tab'+(h+1)+'"><a href="#'+(h+1)+'" title="'+d(this).text()+'">'+d(this).text()+"</a></li>")})},alignNavigation:function(){var f=this;f.totalNavWidth=0;var g="";if(f.options.dynamicArrowsGraphical){g="-arrow"}if(f.options.dynamicTabsAlign!="center"){d(d(f.sliderId).parent()).find(".coda-nav ul").css("margin-"+f.options.dynamicTabsAlign,d(d(f.sliderId).parent()).find(".coda-nav-"+f.options.dynamicTabsAlign+g).outerWidth(true)+parseInt(d(f.sliderId).css("margin-"+f.options.dynamicTabsAlign),10));d(d(f.sliderId).parent()).find(".coda-nav ul").css("float",f.options.dynamicTabsAlign)}else{d(d(f.sliderId).parent()).find(".coda-nav li a").each(function(){f.totalNavWidth+=d(this).outerWidth(true)});if(d.browser.msie){f.totalNavWidth=f.totalNavWidth+(5)}d(d(f.sliderId).parent()).find(".coda-nav ul").css("width",f.totalNavWidth+1)}},addArrows:function(){var f=this;d(f.sliderId).parent().addClass("arrows");if(f.options.dynamicArrowsGraphical){d(f.sliderId).before('<div class="coda-nav-left-arrow" data-dir="prev" title="Slide left"><a href="#"></a></div>');d(f.sliderId).after('<div class="coda-nav-right-arrow" data-dir="next" title="Slide right"><a href="#"></a></div>')}else{d(f.sliderId).before('<div class="coda-nav-left" data-dir="prev" title="Slide left"><a href="#">'+f.options.dynamicArrowLeftText+"</a></div>");d(f.sliderId).after('<div class="coda-nav-right" data-dir="next" title="Slide right"><a href="#">'+f.options.dynamicArrowRightText+"</a></div>")}},events:function(){var f=this;d(d(f.sliderId).parent()).find("[class^=coda-nav-]").on("click",function(g){if(!f.clickable&&f.options.continuous){return false}f.setCurrent(d(this).attr("class").split("-")[2]);if(f.options.continuous){f.clickable=false}return false});d(d(f.sliderId).parent()).find("[class^=coda-nav] li").on("click",function(g){if(!f.clickable&&f.options.continuous){return false}f.setCurrent(parseInt(d(this).attr("class").split("tab")[1],10)-1);if(f.options.continuous){f.clickable=false}return false});d("[data-ref*="+(f.sliderId).split("#")[1]+"]").on("click",function(g){if(!f.clickable&&f.options.continuous){return false}if(f.options.autoSlideControls){if(d(this).attr("name")==="stop"){d(this).html(f.options.autoSlideStartText).attr("name","start");clearTimeout(f.autoslideTimeout);return false}if(d(this).attr("name")==="start"){d(this).html(f.options.autoSlideStopText).attr("name","stop");f.setCurrent(f.currentTab+1);f.autoSlide();return false}}f.setCurrent(parseInt(d(this).attr("href").split("#")[1]-1,10));if(f.options.continuous){f.clickable=false}if(f.options.autoSlideStopWhenClicked){clearTimeout(f.autoslideTimeout)}return false});d(d(f.sliderId).parent()).find("*").on("click",function(g){if(f.options.autoSlideControls&&autoSlideStopWhenClicked){d("body").find("[data-ref*="+(f.sliderId).split("#")[1]+"][name=stop]").html(f.options.autoSlideStartText);clearTimeout(f.autoslideTimeout)}if(!f.clickable&&f.options.continuous){if(f.options.autoSlideStopWhenClicked){clearTimeout(f.autoslideTimeout)}return false}if(f.options.autoSlide){if(f.options.autoSlideStopWhenClicked){clearTimeout(f.autoslideTimeout)}else{f.autoSlide(clearTimeout(f.autoslideTimeout));f.clickable=true}}if(f.options.continuous){clearTimeout(f.continuousTimeout)}})},setCurrent:function(g){var f=this;if(f.clickable){if(typeof g=="number"){f.currentTab=g}else{f.currentTab+=(~~(g==="right")||-1);if(!f.options.continuous){f.currentTab=(f.currentTab<0)?this.panelCount-1:(f.currentTab%this.panelCount)}}if(f.options.continuous){f.panelHeightCount=f.currentTab+1;if(f.currentTab===f.panelCount-2){f.setTab=0}else{if(f.currentTab===-1){f.setTab=f.panelCount-3}else{f.setTab=f.currentTab}}}else{f.panelHeightCount=f.currentTab;f.setTab=f.currentTab}d(d(f.sliderId).parent()).find(".tab"+(f.setTab+1)+" a:first").addClass("current").parent().siblings().children().removeClass("current");if(f.options.hashLinking){if(f.options.continuous){if(f.currentTab===f.panelCount-2){c.location.hash=1}else{if(f.currentTab===-1){c.location.hash=f.panelCount-2}else{c.location.hash=f.currentTab+1}}}else{c.location.hash=f.currentTab+1}}this.transition()}},transition:function(){var f=this;if(f.options.autoHeight){d(f.panelContainer).parent().animate({height:d(d(f.panelContainer).children()[f.panelHeightCount]).height()},{easing:f.options.autoHeightEaseFunction,duration:f.options.autoHeightEaseDuration,queue:false})}if(f.options.continuous){f.marginLeft=-(f.currentTab*f.slideWidth)-f.slideWidth}else{f.marginLeft=-(f.currentTab*f.slideWidth)}(f.panelContainer).animate({"margin-left":f.marginLeft+f.pSign},{easing:f.options.slideEaseFunction,duration:f.options.slideEaseDuration,queue:false,complete:f.continuousSlide(f.options.slideEaseDuration+50)})},autoSlide:function(){var f=this;if(f.options.autoSlideInterval<f.options.slideEaseDuration){f.options.autoSlideInterval=(f.options.slideEaseDuration>f.options.autoHeightEaseDuration)?f.options.slideEaseDuration:f.options.autoHeightEaseDuration}if(f.options.continuous){f.clickable=false}f.autoslideTimeout=setTimeout(function(){f.setCurrent(f.options.autoSliderDirection);f.autoSlide()},f.options.autoSlideInterval)},continuousSlide:function(g){var f=this;if(f.options.continuous){f.continuousTimeout=setTimeout(function(){if(f.currentTab===f.panelCount-2){d(f.panelContainer).css("margin-left",-f.slideWidth+f.pSign);f.currentTab=0}else{if(f.currentTab===-1){d(f.panelContainer).css("margin-left",-(((f.slideWidth*f.panelCount)-(f.slideWidth*2)))+f.pSign);f.currentTab=(f.panelCount-3)}}f.clickable=true},g)}else{f.clickable=true}}};d.fn.codaSlider=function(f){return this.each(function(){var g=Object.create(b);g.init(f,this)})};d.fn.codaSlider.options={autoHeight:true,autoHeightEaseDuration:1500,autoHeightEaseFunction:"easeInOutExpo",autoSlide:false,autoSliderDirection:"right",autoSlideInterval:7000,autoSlideControls:false,autoSlideStartText:"Start",autoSlideStopText:"Stop",autoSlideStopWhenClicked:true,continuous:true,crossLinking:true,dynamicArrows:true,dynamicArrowsGraphical:false,dynamicArrowLeftText:"&#171; left",dynamicArrowRightText:"right &#187;",dynamicTabs:true,dynamicTabsAlign:"center",dynamicTabsPosition:"top",externalTriggerSelector:"a.xtrig",firstPanelToLoad:1,hashLinking:false,panelTitleSelector:"h2.title",slideEaseDuration:1500,slideEaseFunction:"easeInOutExpo"}})(jQuery,window,document);